# 第二章 2.2 物理层技术介绍 - 备课笔记（提纲版）

## 课程信息
- **课程名称**：传感器网络技术与应用
- **章节**：第2章 2.2 物理层技术介绍
- **课时**：6课时（300分钟）
- **学生背景**：已学习2.1节OSI模型，尚未系统学习通信原理

## 教学目标
1. 理解物理层在WSN协议栈中的作用和设计挑战
2. 掌握无线信道的基本特性和ISM频段选择
3. 掌握霍夫曼编码的完整流程
4. 理解信道编码的目的和基本方法
5. 掌握ASK/FSK/PSK三种调制方式的原理
6. 了解ZigBee和LoRa等WSN常用通信技术

## 重难点
- **重点**：霍夫曼编码流程、三种调制方式、ZigBee/LoRa特点
- **难点**：无线信道特性理解、扩频通信原理

---

# 第1课时：2.2.1 物理层概述与设计要求（50分钟）

## 一、课程引入（5分钟）

### 内容要点
- 回顾OSI七层模型，物理层是最底层
- 物理层是数据传输的"基础设施"
- 引出问题：WSN物理层有什么特殊要求？

### 衔接语
> "上一节我们学习了OSI七层模型，知道物理层负责实际的比特流传输。今天我们深入学习物理层技术，看看在无线传感器网络中，物理层是如何工作的。"

---

## 二、物理层定义与功能（15分钟）

### 2.1 物理层定义

**内容要点**：
- ISO定义：为比特流传输提供物理连接
- 物理层是协议栈最底层，向下直接与传输介质相连
- 是各种网络设备互联必须遵循的底层协议

**教学建议**：
- 用高速公路类比：物理层就像道路，是数据通行的基础

### 2.2 物理层主要功能

**内容要点**：
1. **传输数据**：为数据终端设备提供透明传送数据的通路
2. **传输介质选择**：有线/无线
3. **频段分配**：选择合适的工作频段
4. **信号编码**：信源编码、信道编码
5. **数据调制**：将基带信号调制到载波上
6. **收发管理**：评估信道状态、能量检测

**衔接语**：
> "了解了物理层的功能，我们来看看物理层有哪些具体的特性规定。"

---

## 三、物理层特性（15分钟）

### 3.1 五大特性

**内容要点**：

| 特性 | 说明 | 示例 |
|------|------|------|
| 机械特性 | 接口的物理形状、尺寸 | USB接口形状 |
| 电气特性 | 电压、阻抗等电气参数 | 信号电平标准 |
| 功能特性 | 各信号线的用途 | 数据线、控制线 |
| 规程特性 | 传输事件的顺序 | 建立连接的步骤 |
| 链路特性 | 无线信道的传播特性 | 路径损耗、多径 |

### 3.2 链路特性详解（重点）

**内容要点**：

1. **路径损耗**
   - 信号能量随距离增大而衰减
   - 衰减与距离的n次方成正比（2<n<4）

2. **多径效应**
   - 信号经多条路径到达接收端
   - 导致信号叠加、衰落

3. **噪声干扰**
   - 人为噪声、自然噪声、内部噪声
   - 影响信噪比

4. **邻节点干扰**
   - WSN节点密集部署，同频干扰
   - 需要MAC协议协调

5. **链路非对称性**
   - 正向和反向链路质量可能不同

**教学建议**：
- 强调这些特性是WSN物理层设计必须考虑的因素

---

## 四、WSN物理层设计要求（10分钟）

### 内容要点

**设计目标**：以尽可能少的能量消耗获得较大的链路容量

**具体要求**：
| 要求 | 说明 |
|------|------|
| 低功耗 | 电池供电，延长生存时间 |
| 低发射功率 | 短距离通信 |
| 低占空系数 | 大部分时间休眠 |
| 相对低数据率 | 几十到几百kbps |
| 低实现复杂度 | 简化电路设计 |
| 低成本 | 大规模部署需求 |

**设计挑战**：
- 成本与性能的平衡
- 功耗与传输距离的权衡
- ISM频段的干扰问题

---

## 五、小结（5分钟）

### 本课时知识点
1. 物理层是协议栈最底层，负责比特流传输
2. 物理层五大特性：机械、电气、功能、规程、链路
3. 无线链路面临：路径损耗、多径效应、噪声、干扰
4. WSN物理层设计核心：低功耗、低成本、低复杂度

### 衔接下节
> "今天我们了解了物理层的基本概念和设计要求，下节课我们将学习无线电波是如何传播的，以及如何选择合适的工作频段。"

---

# 第2课时：2.2.2 无线电波与无线信道（50分钟）

## 一、回顾与引入（5分钟）

### 回顾要点
- 物理层功能：传输数据、选择介质、编码调制
- WSN物理层面临的挑战

### 引入问题
> "我们知道WSN主要使用无线通信，那么无线信号在空中是如何传播的？为什么有时候信号好、有时候信号差？"

---

## 二、传输介质与无线电波（10分钟）

### 2.1 传输介质分类

**内容要点**：
- **有线传输**：双绞线、同轴电缆、光纤
- **无线传输**：
  - 声波：水下通信
  - 电磁波：无线电波、红外线、光波

**WSN主要使用无线电波**，原因：
- 容易产生和传播
- 可穿透建筑物
- 全方向传播，无需精确对准

### 2.2 无线电波传播方式

**内容要点**：
1. **直射**：自由空间直线传播
2. **反射**：遇到大物体（建筑物）反射
3. **散射**：遇到小物体或粗糙表面散射
4. **绕射**：遇到边缘绕过障碍物

**教学建议**：用图示说明四种传播方式

---

## 三、无线信道模型（15分钟）

### 3.1 自由空间信道

**内容要点**：
- 理想情况：无障碍、无反射
- Friis公式（展示，解释含义）
- 接收功率随距离平方衰减

**教学说明**：
> "公式不需要记忆，理解含义即可：距离越远，接收到的信号越弱。"

### 3.2 多径信道 ★

**内容要点**：
- 多条路径的信号叠加
- 可能增强（同相叠加）或减弱（反相抵消）
- 导致信号衰落和时延扩展

**对WSN的影响**：
- 数据包损坏或丢失
- 需要编码和调制技术应对

### 3.3 加性噪声信道

**内容要点**：
- 噪声来源：人为、自然、内部
- 热噪声：不可避免
- 信噪比（SNR）决定通信质量

### 3.4 实际环境信道

**内容要点**：
- 综合考虑路径损耗、多径、噪声
- 路径损耗指数n随环境变化
- WSN近地面部署，损耗因子较大

---

## 四、频段选择与ISM频段（15分钟）

### 4.1 频段选择原则

**内容要点**：

| 低频率 | 高频率 |
|--------|--------|
| 传播损耗小 | 资源丰富 |
| 覆盖距离广 | 系统容量大 |
| 绕射能力强 | 天线尺寸小 |
| 资源紧张 | 传输损耗大 |
| 系统容量低 | 技术难度高 |

**选择原则**：综合考虑覆盖范围、传输速率、功耗、成本

### 4.2 ISM频段 ★

**内容要点**：
- ISM = Industrial Scientific Medical
- 免许可证，免费使用
- 对发射功率有限制

**WSN常用ISM频段**：
| 频段 | 特点 | 应用 |
|------|------|------|
| 433MHz | 穿透力强 | 远程监测 |
| 868/915MHz | 平衡性好 | LoRa |
| 2.4GHz | 全球通用 | ZigBee、WiFi |

**注意事项**：
- 2.4GHz干扰最严重（WiFi、蓝牙、微波炉）
- 需要抗干扰设计

---

## 五、小结（5分钟）

### 本课时知识点
1. 无线电波传播方式：直射、反射、散射、绕射
2. 无线信道模型：自由空间、多径、加性噪声
3. 多径效应导致信号衰落
4. ISM频段是WSN首选，但需注意干扰

### 衔接下节
> "了解了无线信道的特性，我们知道信号在传输过程中会受到各种干扰。如何提高传输效率和可靠性？这就需要编码技术。下节课我们学习信源编码。"

---

# 第3课时：2.2.3 信源编码（50分钟）

## 一、引入（5分钟）

### 引入问题
> "假设你要发送一段文字，每个字符都用8位编码，有没有更省空间的方法？"

### 引出信源编码
- 原始数据存在冗余
- 压缩数据可以减少传输量
- 对WSN特别重要：节省能量

---

## 二、信源编码概念（10分钟）

### 2.1 定义与目的

**内容要点**：
- **目的**：减少或消除信源冗余度，压缩数据量
- **效果**：提高信道传输的有效性
- **附带功能**：完成模/数转换

### 2.2 编码分类

| 类型 | 说明 | 特点 |
|------|------|------|
| 无损编码 | 完全还原原始数据 | 压缩率有限 |
| 有损编码 | 允许一定失真 | 压缩率高 |

**WSN通常使用无损编码**（传感器数据需要准确）

### 2.3 常用编码方法

- 霍夫曼编码（Huffman Encoding）★
- 香农-范诺编码
- 算术编码
- LZW编码

**衔接语**：
> "今天我们重点学习霍夫曼编码，它是最经典的无损编码方法。"

---

## 三、霍夫曼编码详解（25分钟）★★

### 3.1 基本思想

**内容要点**：
- 出现频率高的符号用短码
- 出现频率低的符号用长码
- 平均码长最短

### 3.2 编码步骤

**五步流程**：
1. **统计概率**：统计各符号出现的概率
2. **排序**：按概率从大到小排列
3. **构造霍夫曼树**：
   - 选取概率最小的两个节点合并
   - 生成父节点，概率为两者之和
   - 重复直到只剩一个根节点
4. **分配码字**：
   - 从根到叶子
   - 左支为0，右支为1（或反之）
5. **生成编码**：记录从根到各叶子的路径

### 3.3 完整例题

**例题**：信源符号 A-G，概率分别为 0.1, 0.18, 0.47, 0.05, 0.06, 0.1, 0.04

**步骤演示**：

**第一步：统计概率**
| 符号 | A | B | C | D | E | F | G |
|------|---|---|---|---|---|---|---|
| 概率 | 0.1 | 0.18 | 0.47 | 0.05 | 0.06 | 0.1 | 0.04 |

**第二步：排序**
C(0.47) > B(0.18) > A(0.1) = F(0.1) > E(0.06) > D(0.05) > G(0.04)

**第三步：构造霍夫曼树**
（详细演示合并过程，画树形图）

**第四步：分配码字**
（从根节点开始，左0右1）

**第五步：生成编码**
| 符号 | 概率 | 编码 | 码长 |
|------|------|------|------|
| C | 0.47 | 0 | 1 |
| B | 0.18 | 10 | 2 |
| A | 0.1 | 110 | 3 |
| F | 0.1 | 111 | 3 |
| E | 0.06 | 1100 | 4 |
| D | 0.05 | 11010 | 5 |
| G | 0.04 | 11011 | 5 |

### 3.4 平均码长计算

**公式**：L = Σ(概率 × 码长)

**本例**：
L = 0.47×1 + 0.18×2 + 0.1×3 + 0.1×3 + 0.06×4 + 0.05×5 + 0.04×5
= 0.47 + 0.36 + 0.30 + 0.30 + 0.24 + 0.25 + 0.20
= 2.12 位/符号

**对比**：等长编码需要 3位/符号（8个符号需要3位），压缩率约30%

---

## 四、霍夫曼编码在WSN中的应用（5分钟）

### 内容要点
- 传感器数据往往有规律（如温度集中在某区间）
- 对高频出现的数值短编码
- 减少传输数据量，节省能量

### 示例
温度监测：20-25℃出现概率80%，其他20%
→ 可以用1位编码常见温度区间

---

## 五、小结（5分钟）

### 本课时知识点
1. 信源编码目的：压缩数据，提高传输效率
2. 霍夫曼编码五步流程
3. 高频符号短码，低频符号长码
4. 平均码长计算

### 随堂练习
给出新的概率分布，让学生练习霍夫曼编码

### 衔接下节
> "信源编码解决了数据压缩的问题，但传输过程中可能出错怎么办？下节课我们学习信道编码，它能提高传输的可靠性。"

---

# 第4课时：2.2.4 信道编码（50分钟）

## 一、回顾与引入（5分钟）

### 回顾信源编码
- 目的：压缩数据，减少冗余
- 效果：提高传输效率

### 引入信道编码
> "信源编码去掉了冗余，但如果传输过程中出错了怎么办？信道编码就是要'有意增加冗余'，让接收方能发现甚至纠正错误。"

---

## 二、信道编码概念（10分钟）

### 2.1 定义与目的

**内容要点**：
- **目的**：通过增加冗余，提高传输可靠性
- **作用**：检错、纠错

### 2.2 信源编码 vs 信道编码

| | 信源编码 | 信道编码 |
|---|----------|----------|
| 目的 | 减少冗余 | 增加冗余 |
| 效果 | 提高效率 | 提高可靠性 |
| 执行顺序 | 先 | 后 |
| 数据量 | 减少 | 增加 |

**衔接语**：
> "为什么增加冗余能提高可靠性？这涉及到信息论的基本原理。"

---

## 三、信道容量与香农定理（15分钟）

### 3.1 香农定理（概念理解）

**公式展示**：
C = B × log₂(1 + S/N)

**含义解释**：
- C：信道容量（最大无差错传输速率）
- B：信道带宽
- S/N：信噪比

**关键结论**：
- 信噪比越高，信道容量越大
- 可以用带宽换信噪比

**教学说明**：
> "这个公式告诉我们，在有噪声的信道中，只要传输速率不超过信道容量，理论上可以实现无差错传输。信道编码就是实现这一目标的技术。"

### 3.2 信道类型

**二元对称信道（BSC）**：
- 传输0和1，可能出错
- 传输正确概率p，错误概率1-p

**二元删除信道（BEC）**：
- 信息可能丢失（收到"不知道"）
- 不会传错（不会把0变成1）

---

## 四、奇偶校验码详解（15分钟）

### 4.1 基本原理

**内容要点**：
- 在数据后面加一位校验位
- 使整体"1"的个数为奇数或偶数
- 奇校验：1的个数为奇数
- 偶校验：1的个数为偶数

### 4.2 例题

**题目**：数据为"011001101"，构造奇校验码和偶校验码

**解答**：
- 原数据：011001101，共5个"1"（奇数）
- **奇校验**：加0 → 0110011010（保持奇数）
- **偶校验**：加1 → 0110011011（变成偶数）

### 4.3 特点分析

| 优点 | 缺点 |
|------|------|
| 简单易实现 | 只能检测奇数个错误 |
| 开销小 | 不能纠错 |
| 适合低功耗场景 | 检错能力有限 |

### 4.4 其他编码方法（简介）

| 编码方法 | 特点 |
|----------|------|
| CRC | 检错能力强，广泛使用 |
| 卷积码 | 可纠错，复杂度中等 |
| LDPC | 接近香农极限，5G使用 |
| Turbo码 | 高性能，4G使用 |

---

## 五、小结（5分钟）

### 本课时知识点
1. 信道编码目的：增加冗余，提高可靠性
2. 香农定理：信道容量与带宽、信噪比的关系
3. 奇偶校验码：简单的检错方法
4. 信源编码在前，信道编码在后

### 衔接下节
> "编码解决了数据的压缩和保护问题。但无线信号怎么在空中传播呢？这就需要调制技术。下节课我们学习信号调制。"

---

# 第5课时：2.2.5 信号调制与扩频通信（50分钟）

## 一、引入（5分钟）

### 引入问题
> "我们编码后的数字信号是0和1，怎么把它变成无线电波发送出去？"

### 引出调制
- 基带信号频率低，无法直接无线传输
- 需要"搭载"到高频载波上
- 这个过程叫调制

---

## 二、调制基础（5分钟）

### 2.1 调制定义

**内容要点**：
- 用调制信号控制载波的某个参数
- 载波参数：幅度、频率、相位
- 使载波随调制信号变化

### 2.2 为什么需要调制？

1. **天线尺寸要求**：有效天线长度约为波长的1/4
   - 1kHz信号 → 天线75km
   - 2.4GHz信号 → 天线3cm
2. **频分复用**：不同信号占用不同频段
3. **提高抗干扰能力**

---

## 三、数字调制技术（20分钟）★★

### 3.1 三种基本调制方式

| 调制方式 | 全称 | 变化参数 |
|----------|------|----------|
| ASK | 幅移键控 | 幅度 |
| FSK | 频移键控 | 频率 |
| PSK | 相移键控 | 相位 |

### 3.2 二进制振幅键控（2ASK）

**原理**：
- "1"：发送载波
- "0"：不发送（或小幅度）

**特点**：
- 优点：实现简单
- 缺点：抗干扰能力差

**波形图**：（展示调制信号、载波、已调信号）

### 3.3 二进制频移键控（2FSK）

**原理**：
- "1"：发送频率f1
- "0"：发送频率f2

**特点**：
- 优点：抗干扰能力较好
- 缺点：需要更大带宽

**波形图**：（展示频率变化）

### 3.4 二进制相移键控（2PSK）

**原理**：
- "1"：发送相位0°
- "0"：发送相位180°（反相）

**特点**：
- 优点：抗干扰能力最好
- 缺点：实现复杂

**波形图**：（展示相位变化）

### 3.5 三种调制方式对比

| 特性 | ASK | FSK | PSK |
|------|-----|-----|-----|
| 抗噪性 | 差 | 中 | 好 |
| 带宽效率 | 高 | 中 | 高 |
| 实现复杂度 | 低 | 中 | 高 |
| WSN适用性 | 低功耗场景 | 常用 | 高可靠场景 |

---

## 四、扩频通信（15分钟）

### 4.1 扩频通信原理

**内容要点**：
- 将窄带信号扩展到宽带传输
- 发送端：信号 × 伪随机码 → 宽带
- 接收端：宽带 × 相同伪随机码 → 窄带

**理论基础**：香农公式——带宽和信噪比可以互换

### 4.2 扩频通信优点

1. **抗干扰能力强**
2. **抗多径衰落**
3. **低功率谱密度**（隐蔽性好）
4. **支持码分多址（CDMA）**
5. **保密性好**

### 4.3 两种扩频方式

**直接序列扩频（DSSS）**：
- 用伪随机码直接与信号相乘
- 处理增益高
- 应用：GPS、CDMA

**跳频扩频（FHSS）**：
- 载波频率按伪随机规律跳变
- 跳频避开干扰
- 应用：蓝牙、部分军用通信

### 4.4 DSSS vs FHSS

| | DSSS | FHSS |
|---|------|------|
| 扩频方式 | 码扩频 | 频率跳变 |
| 抗干扰 | 处理增益 | 跳频躲避 |
| 同步要求 | 高 | 中 |
| 典型应用 | ZigBee | 蓝牙 |

---

## 五、小结（5分钟）

### 本课时知识点
1. 调制作用：将基带信号搬移到高频
2. ASK/FSK/PSK三种调制方式的原理和特点
3. 扩频通信：宽带传输，抗干扰
4. DSSS和FHSS两种扩频方式

### 衔接下节
> "学习了物理层的编码和调制技术，最后一节课我们来看看这些技术是如何应用在实际的无线通信标准中的，重点学习ZigBee和LoRa。"

---

# 第6课时：2.2.6 短距离无线通信技术（50分钟）

## 一、引入（5分钟）

### 引入问题
> "前面我们学习了物理层的各种技术，那实际的无线传感器网络使用什么通信技术呢？"

### WSN对通信技术的需求
- 低功耗
- 低成本
- 足够的传输距离
- 合适的数据速率

---

## 二、短距离无线通信技术概览（5分钟）

### 技术对比表

| 技术 | 频段 | 速率 | 距离 | 功耗 | WSN适用性 |
|------|------|------|------|------|-----------|
| ZigBee | 2.4GHz | 250kbps | 10-100m | 极低 | ★★★★★ |
| LoRa | 433/868/915MHz | 0.3-50kbps | 2-15km | 低 | ★★★★★ |
| BLE | 2.4GHz | 1Mbps | 10-100m | 低 | ★★★☆☆ |
| WiFi | 2.4/5GHz | 11Mbps+ | 50-100m | 高 | ★★☆☆☆ |
| UWB | 3.1-10.6GHz | 100Mbps+ | <10m | 低 | ★★★☆☆ |

---

## 三、ZigBee技术详解（15分钟）★★

### 3.1 ZigBee概述

**内容要点**：
- 基于IEEE 802.15.4标准
- 低功耗、低速率、低成本、短距离
- 支持大量节点（65000+）

### 3.2 ZigBee技术特点

| 特点 | 说明 |
|------|------|
| 低功耗 | 电池可用数年 |
| 低速率 | 250kbps（足够传感器数据） |
| 低成本 | 芯片价格低 |
| 大容量 | 支持65000个节点 |
| 自组网 | 支持多种拓扑 |

### 3.3 ZigBee协议栈

```
┌─────────────────┐
│   应用层（APL）   │
├─────────────────┤
│  网络层（NWK）   │  ← ZigBee联盟定义
├─────────────────┤
│   MAC层         │
├─────────────────┤  ← IEEE 802.15.4定义
│   物理层（PHY）  │
└─────────────────┘
```

### 3.4 ZigBee网络拓扑

- **星型**：简单，中心节点负担重
- **树型**：层次结构，扩展性好
- **网状（Mesh）**：可靠性高，自愈能力强

### 3.5 ZigBee应用场景

- 智能家居
- 工业自动化
- 环境监测
- 医疗健康

---

## 四、LoRa技术详解（15分钟）★★

### 4.1 LoRa概述

**内容要点**：
- Long Range，长距离无线通信
- 使用CSS（啁啾扩频）调制
- 适合低功耗广域网（LPWAN）

### 4.2 LoRa技术特点

| 特点 | 说明 |
|------|------|
| 远距离 | 城市2-5km，郊区15km+ |
| 低功耗 | 电池可用数年 |
| 低速率 | 0.3-50kbps |
| 强抗干扰 | CSS扩频技术 |
| 穿透力强 | 低频段优势 |

### 4.3 LoRa vs ZigBee

| | ZigBee | LoRa |
|---|--------|------|
| 传输距离 | 10-100m | 2-15km |
| 数据速率 | 250kbps | 0.3-50kbps |
| 适用场景 | 室内、密集部署 | 广域、稀疏部署 |
| 网络拓扑 | 自组网 | 星型为主 |
| 典型应用 | 智能家居 | 智慧城市、农业 |

### 4.4 LoRaWAN网络架构

```
终端节点 ──无线──→ 网关 ──IP网络──→ 服务器 ──→ 应用
```

### 4.5 LoRa应用场景

- 智慧城市（水表、电表远程抄读）
- 智慧农业（大面积农田监测）
- 物流追踪
- 环境监测

---

## 五、其他技术简介（5分钟）

### 5.1 超宽带（UWB）
- 高精度定位（厘米级）
- 高速短距离传输
- 应用：室内定位、车钥匙

### 5.2 蓝牙（Bluetooth）
- BLE低功耗版本
- 适合可穿戴设备
- 应用：耳机、手环

### 5.3 WiFi
- 高速率、高功耗
- 适合需要大数据量传输的场景
- 应用：视频监控

### 5.4 红外
- 需要视距
- 简单、低功耗
- 应用：遥控器

---

## 六、总结与回顾（5分钟）

### 2.2节知识框架

```
2.2 物理层技术
├── 2.2.1 物理层概述
│   └── 功能、特性、设计要求
├── 2.2.2 无线电波与信道
│   └── 传播特性、信道模型、ISM频段
├── 2.2.3 信源编码
│   └── 霍夫曼编码（重点）
├── 2.2.4 信道编码
│   └── 香农定理、奇偶校验码
├── 2.2.5 调制与扩频
│   └── ASK/FSK/PSK、DSSS/FHSS
└── 2.2.6 短距离通信技术
    └── ZigBee、LoRa（重点）
```

### 核心知识点回顾
1. 物理层负责比特流传输，面临多种信道挑战
2. 信源编码压缩数据，信道编码提高可靠性
3. 调制将基带信号搬移到高频
4. ZigBee适合短距离密集部署，LoRa适合长距离广域部署

### 衔接下节
> "物理层解决了'如何传输比特'的问题。下一节我们将学习数据链路层，它解决'如何在多个节点间共享信道'的问题。"
