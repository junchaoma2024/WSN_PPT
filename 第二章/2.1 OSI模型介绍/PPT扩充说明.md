# 第二章 2.1 OSI七层模型介绍 - PPT扩充说明

本文档针对 `ch2-2.1-OSI模型介绍.pptx`（共21页）提出具体的扩充建议，以支撑100分钟（两课时）的教学。

---

## 第1页：标题页

**现有内容**：第2章目录（2.1-2.6节）

**扩充建议**：保持不变，作为章节导航。

---

## 第2页：章节导航页

**现有内容**：重复显示章节目录，高亮2.1节

**扩充建议**：保持不变。

---

## 第3页：OSI七层模型介绍

**现有内容**：
- OSI定义
- 提出组织（ISO，1984年）
- 目的和内容

**扩充建议**：在本页后新增1页，添加以下内容：

### 新增页面3-A：为什么需要分层？

**类比：快递寄送过程**

| OSI层 | 快递类比 | 职责 |
|-------|---------|------|
| 应用层 | 你写信/打包物品 | 准备要发送的内容 |
| 表示层 | 用信封装好、写上格式 | 统一格式，加密压缩 |
| 会话层 | 确认收件人在家 | 建立通信会话 |
| 传输层 | 选择快递公司（顺丰/圆通） | 选择可靠/快速传输 |
| 网络层 | 快递公司规划路线 | 路由寻址 |
| 数据链路层 | 每一站的交接 | 单跳可靠传输 |
| 物理层 | 卡车/飞机运输 | 实际比特传输 |

**要点**：分层使得每一层只关注自己的职责，便于设计、维护和故障排查。

---

## 第4页：OSI特点

**现有内容**：易于理解、易于维护、厂商互通、各层独立、协议独立、故障隔离、标准化

**扩充建议**：保持不变，内容完整。可在讲解时举例说明"故障隔离"的实际意义。

---

## 第5页：通信领域标准化组织

**现有内容**：ISO、IEEE、ITU、3GPP简介

**扩充建议**：在本页后新增1页，补充与传感器网络相关的标准：

### 新增页面5-A：与WSN相关的通信标准

| 组织 | 标准 | 与WSN的关系 |
|------|------|-------------|
| IEEE | 802.15.4 | Zigbee物理层和MAC层基础 |
| IEEE | 802.11 | WiFi，高速率WSN应用 |
| IEEE | 802.15.1 | 蓝牙，小范围WSN |
| 3GPP | NB-IoT | 窄带物联网，广域WSN |
| IETF | 6LoWPAN | IPv6低功耗无线网络 |

**要点**：WSN协议栈通常基于这些标准进行裁剪和优化。

---

## 第6页：OSI七层模型图示

**现有内容**：七层结构图

**扩充建议**：保持不变。这是核心参考图，后续讲解每层时都会回顾。

---

## 第7页：应用层

**现有内容**：
- 直接为应用程序提供网络服务
- HTTP、FTP、SMTP、DNS
- 不关心传输过程

**扩充建议**：补充以下内容（可在讲解中展开或新增页面）：

### 扩充内容7-A：应用层协议实例

**HTTP协议工作流程**（可用图示）：
1. 用户在浏览器输入网址
2. 浏览器构造HTTP请求
3. 请求交给下层处理
4. 服务器返回HTTP响应
5. 浏览器显示网页

**WSN应用层协议**：
- CoAP（受限应用协议）：轻量级HTTP替代
- MQTT（消息队列遥测传输）：物联网消息协议

---

## 第8页：表示层

**现有内容**：格式化、加密、压缩

**扩充建议**：补充实例说明：

### 扩充内容8-A：表示层功能实例

| 功能 | 实例 |
|------|------|
| 格式化 | JPEG、PNG图片格式转换 |
| 加密 | SSL/TLS加密（HTTPS中的S） |
| 压缩 | gzip压缩网页内容 |

**在WSN中的应用**：
- 传感器数据通常需要压缩以节省能量
- 安全敏感应用需要加密传输

---

## 第9页：会话层

**现有内容**：会话建立/管理/终止、数据同步、半双工/全双工

**扩充建议**：补充实例：

### 扩充内容9-A：会话层实例

**视频通话场景**：
1. 建立会话：拨打电话，双方接通
2. 管理会话：通话过程中保持连接
3. 数据同步：网络中断后恢复到断点
4. 终止会话：挂断电话

**要点**：现代TCP/IP协议中，会话层功能通常合并到应用层或传输层。

---

## 第10页：传输层（重点扩充）

**现有内容**：数据分段、流量控制、错误检测、TCP/UDP

**扩充建议**：本页是重点，建议新增2页详细讲解TCP和UDP：

### 新增页面10-A：TCP vs UDP对比

| 特性 | TCP | UDP |
|------|-----|-----|
| 连接方式 | 面向连接（三次握手） | 无连接 |
| 可靠性 | 可靠传输（确认重传） | 不可靠（尽力而为） |
| 顺序保证 | 保证顺序 | 不保证顺序 |
| 速度 | 较慢（有开销） | 较快（无开销） |
| 应用场景 | 网页、邮件、文件传输 | 视频直播、DNS查询、游戏 |

### 新增页面10-B：TCP三次握手图解

```
客户端                    服务器
   |                         |
   |------- SYN=1 --------->|  第一次握手：请求建立连接
   |                         |
   |<--- SYN=1, ACK=1 ------|  第二次握手：同意并确认
   |                         |
   |------- ACK=1 --------->|  第三次握手：确认收到
   |                         |
   |====== 连接建立 =========|
```

**类比**：打电话
- "喂，能听到吗？"（SYN）
- "能听到，你能听到我吗？"（SYN+ACK）
- "能听到，开始说吧"（ACK）

---

## 第11页：网络层

**现有内容**：逻辑寻址、路由、分组转发

**扩充建议**：新增1页详细说明IP地址和路由：

### 新增页面11-A：网络层核心概念

**IP地址**（类比：门牌号）
- IPv4：32位，如 192.168.1.1
- IPv6：128位，如 2001:db8::1
- 作用：标识网络中的每一台设备

**路由**（类比：导航地图）
- 路由器根据目的IP地址选择最佳路径
- 路由表记录"去某地应该走哪条路"

**在WSN中的特点**：
- 节点可能没有全局IP地址
- 路由协议需要考虑能量效率

---

## 第12页：数据链路层

**现有内容**：封装成帧、错误检测、流量控制、MAC协议

**扩充建议**：新增1页说明帧结构和MAC协议：

### 新增页面12-A：数据链路层详解

**以太网帧结构**：
```
| 前导码 | 目的MAC | 源MAC | 类型 | 数据 | FCS校验 |
```

**MAC地址**（类比：身份证号）
- 48位，如 00:1A:2B:3C:4D:5E
- 全球唯一，烧录在网卡中

**常见MAC协议对比**：
| 协议 | 原理 | 特点 |
|------|------|------|
| CSMA/CD | 先听后发，冲突检测 | 有线以太网 |
| CSMA/CA | 先听后发，冲突避免 | 无线WiFi |
| TDMA | 时分多址 | 无冲突，需同步 |

---

## 第13页：物理层

**现有内容**：传输介质、信道编码、信源编码

**扩充建议**：补充传输介质对比：

### 扩充内容13-A：传输介质对比

| 介质 | 带宽 | 距离 | 抗干扰 | 成本 |
|------|------|------|--------|------|
| 双绞线 | 中等 | 100m | 一般 | 低 |
| 同轴电缆 | 较高 | 500m | 较好 | 中 |
| 光纤 | 很高 | 数十km | 极好 | 高 |
| 无线电波 | 取决于频段 | 取决于功率 | 一般 | 低 |

**WSN物理层**：
- 主要使用无线电波（2.4GHz、868MHz、915MHz）
- 低功率、短距离（10-100米）

---

## 第14页：OSI模型优缺点

**现有内容**：模块化设计、复杂未被广泛采用、实际系统简化

**扩充建议**：保持不变，在讲解时强调这一点引出TCP/IP模型。

---

## 第15-16页：OSI vs TCP/IP对比

**现有内容**：七层与四层对应图

**扩充建议**：新增1页详细对比：

### 新增页面15-A：OSI与TCP/IP详细对比

| 对比项 | OSI七层模型 | TCP/IP四层模型 |
|--------|-------------|----------------|
| 层数 | 7层 | 4层 |
| 设计目的 | 理论参考模型 | 实际应用协议 |
| 应用情况 | 教学参考 | 互联网实际使用 |
| 上三层 | 应用、表示、会话 | 合并为应用层 |
| 下两层 | 数据链路、物理 | 合并为网络接口层 |

**WSN协议栈**：
- 通常采用简化的五层或三层结构
- 根据应用需求裁剪

---

## 第17页：总结

**现有内容**：七层功能一句话总结

**扩充建议**：保持不变。可在此页后新增数据封装过程图：

### 新增页面17-A：数据封装与解封装

**发送方（自上而下封装）**：
```
应用层数据
    ↓ + 应用层头
表示层数据
    ↓ + 表示层头
会话层数据
    ↓ + 会话层头
传输层段（Segment）
    ↓ + 传输层头（端口号）
网络层包（Packet）
    ↓ + 网络层头（IP地址）
数据链路层帧（Frame）
    ↓ + 帧头帧尾（MAC地址）
物理层比特流（Bits）
```

**接收方（自下而上解封装）**：逆向过程

---

## 第18-21页：现有练习题

**现有内容**：4道选择题

**扩充建议**：保留现有题目，在 `课堂随堂练习.md` 中补充4-5道新题。

---

## 扩充总结

| 位置 | 扩充内容 | 新增页数 |
|------|----------|----------|
| 第3页后 | 快递类比分层 | +1页 |
| 第5页后 | WSN相关标准 | +1页 |
| 第10页后 | TCP vs UDP、三次握手 | +2页 |
| 第11页后 | IP地址和路由详解 | +1页 |
| 第12页后 | 帧结构和MAC协议 | +1页 |
| 第15页后 | OSI vs TCP/IP详细对比 | +1页 |
| 第17页后 | 数据封装过程 | +1页 |

**原有21页 + 新增8页 = 约29页**，足以支撑100分钟讲授。
